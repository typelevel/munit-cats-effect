<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>munit-cats-effect</title>
  
  <meta name="author" content="munit-cats-effect contributors"/>
  
  <meta name="author" content="Milan van der Meer"/>
  
  
  <meta name="description" content="docs"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="helium/site/laika-helium.css" />
  <script src="helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="https://typelevel.org"><img src="https://typelevel.org/img/logo.svg"></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://github.com/typelevel/munit-cats-effect"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://github.com/typelevel/munit-cats-effect"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="icon-link glyph-link" href="https://discord.gg/XF3CXcMzqD"><i class="icofont-laika chat" title="Chat">&#xeed5;</i></a>
    
    <a class="icon-link svg-link" href="https://fosstodon.org/@typelevel"><span class="mastodon" title="Mastodon"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g class="svg-shape">
    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
  </g>
</svg></span></a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 active nav-leaf"><a href="#">munit-cats-effect</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">munit-cats-effect</a></p>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="#binaries">Binaries</a></li>
    <li class="level2 nav-leaf"><a href="#for-versions-2-0-0-m1-and-above">For versions <code>2.0.0-M1</code> and above:</a></li>
    <li class="level2 nav-leaf"><a href="#for-versions-1-0-7-and-below">For versions <code>1.0.7</code> and below:</a></li>
    <li class="level1 nav-leaf"><a href="#getting-started">Getting Started</a></li>
    <li class="level1 nav-leaf"><a href="#suite-local-fixtures">Suite-local fixtures</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="munit-cats-effect" class="title">munit-cats-effect</h1>
        <p>Integration library for <a href="https://scalameta.org/munit/">MUnit</a> and <a href="https://github.com/typelevel/cats-effect/">cats-effect</a>.</p>
        
        <h2 id="binaries" class="section"><a class="anchor-link left" href="#binaries"><i class="icofont-laika link">&#xef71;</i></a>Binaries</h2>
        
        <h3 id="for-versions-2-0-0-m1-and-above" class="section"><a class="anchor-link left" href="#for-versions-2-0-0-m1-and-above"><i class="icofont-laika link">&#xef71;</i></a>For versions <code>2.0.0-M1</code> and above:</h3>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;org.typelevel&quot;</span><span> %%% </span><span class="string-literal">&quot;munit-cats-effect&quot;</span><span> % </span><span class="string-literal">&quot;2.1.0&quot;</span><span> % </span><span class="string-literal">&quot;test&quot;</span></code></pre>
        <blockquote>Please note that only Cats Effect 3 is supported for versions <code>2.0.0-M1</code> and above.</blockquote>
        
        <h3 id="for-versions-1-0-7-and-below" class="section"><a class="anchor-link left" href="#for-versions-1-0-7-and-below"><i class="icofont-laika link">&#xef71;</i></a>For versions <code>1.0.7</code> and below:</h3>
        <p>Cats Effect 2 integration is provided via:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;org.typelevel&quot;</span><span> %%% </span><span class="string-literal">&quot;munit-cats-effect-2&quot;</span><span> % </span><span class="identifier">version</span><span> % </span><span class="string-literal">&quot;test&quot;</span></code></pre>
        <p>Cats Effect 3 integration is provided via:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">libraryDependencies</span><span> += </span><span class="string-literal">&quot;org.typelevel&quot;</span><span> %%% </span><span class="string-literal">&quot;munit-cats-effect-3&quot;</span><span> % </span><span class="identifier">version</span><span> % </span><span class="string-literal">&quot;test&quot;</span></code></pre>
        <p>Builds are available for Scala 2.12, 2.13, and 3 for both the JVM and Scala.js.</p>
        
        <h2 id="getting-started" class="section"><a class="anchor-link left" href="#getting-started"><i class="icofont-laika link">&#xef71;</i></a>Getting Started</h2>
        <p>The <code>munit.CatsEffectSuite</code> trait provides the ability to write tests that return <code>IO</code> and <code>SyncIO</code> values without needing to call any unsafe methods (e.g. <code>unsafeRunSync()</code>).</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">effect</span><span>.{</span><span class="type-name">IO</span><span>, </span><span class="type-name">SyncIO</span><span>}
</span><span class="keyword">import</span><span> </span><span class="identifier">munit</span><span>.</span><span class="type-name">CatsEffectSuite</span><span>

</span><span class="keyword">class</span><span> </span><span class="type-name">ExampleSuite</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">CatsEffectSuite</span><span> {

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;tests can return IO[Unit] with assertions expressed via a map&quot;</span><span>) {
    </span><span class="type-name">IO</span><span>(</span><span class="number-literal">42</span><span>).</span><span class="identifier">map</span><span>(</span><span class="identifier">it</span><span> =&gt; </span><span class="identifier">assertEquals</span><span>(</span><span class="identifier">it</span><span>, </span><span class="number-literal">42</span><span>))
  }

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;alternatively, assertions can be written via assertIO&quot;</span><span>) {
    </span><span class="identifier">assertIO</span><span>(</span><span class="type-name">IO</span><span>(</span><span class="number-literal">42</span><span>), </span><span class="number-literal">42</span><span>)
  }

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;or via assertEquals syntax&quot;</span><span>) {
    </span><span class="type-name">IO</span><span>(</span><span class="number-literal">42</span><span>).</span><span class="identifier">assertEquals</span><span>(</span><span class="number-literal">42</span><span>)
  }

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;or via plain assert syntax on IO[Boolean]&quot;</span><span>) {
    </span><span class="type-name">IO</span><span>(</span><span class="boolean-literal">true</span><span>).</span><span class="identifier">assert</span><span>
  }

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;SyncIO works too&quot;</span><span>) {
    </span><span class="type-name">SyncIO</span><span>(</span><span class="number-literal">42</span><span>).</span><span class="identifier">assertEquals</span><span>(</span><span class="number-literal">42</span><span>)
  }

  </span><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">effect</span><span>.</span><span class="identifier">std</span><span>.</span><span class="type-name">Dispatcher</span><span>

  </span><span class="keyword">val</span><span> </span><span class="identifier">dispatcher</span><span> = </span><span class="type-name">ResourceFunFixture</span><span>(</span><span class="type-name">Dispatcher</span><span>.</span><span class="identifier">parallel</span><span>[</span><span class="type-name">IO</span><span>])

  </span><span class="identifier">dispatcher</span><span>.</span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;resources can be lifted to munit fixtures&quot;</span><span>) { </span><span class="identifier">dsp</span><span> =&gt;
    </span><span class="identifier">dsp</span><span>.</span><span class="identifier">unsafeRunAndForget</span><span>(</span><span class="type-name">IO</span><span>(</span><span class="number-literal">42</span><span>))
  }
}</span></code></pre>
        <p>There are more assertion functions like <code>interceptIO</code> and <code>interceptMessageIO</code> as well as syntax versions <code>intercept</code> and <code>interceptMessage</code>. See the <code>CatsEffectAssertions</code> trait for full details.</p>
        <p>Every assertion in <code>CatsEffectAssertions</code> for IO-value or SyncIO-value is an IO computation under the hood. If you are planning to use multiple assertions per one test suite, therefore, they should be composed. Otherwise will calculate only the last assertion.</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">effect</span><span>.{</span><span class="type-name">IO</span><span>, </span><span class="type-name">SyncIO</span><span>}
</span><span class="keyword">import</span><span> </span><span class="identifier">munit</span><span>.</span><span class="type-name">CatsEffectSuite</span><span>

</span><span class="keyword">class</span><span> </span><span class="type-name">MultipleAssertionsExampleSuite</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">CatsEffectSuite</span><span> {
  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;multiple IO-assertions should be composed&quot;</span><span>) {
    </span><span class="identifier">assertIO</span><span>(</span><span class="type-name">IO</span><span>(</span><span class="number-literal">42</span><span>), </span><span class="number-literal">42</span><span>) *&gt;
      </span><span class="identifier">assertIO_</span><span>(</span><span class="type-name">IO</span><span>.</span><span class="identifier">unit</span><span>)
  }

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;multiple IO-assertions should be composed via for-comprehension&quot;</span><span>) {
    </span><span class="keyword">for</span><span> {
      </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">assertIO</span><span>(</span><span class="type-name">IO</span><span>(</span><span class="number-literal">42</span><span>), </span><span class="number-literal">42</span><span>)
      </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">assertIO_</span><span>(</span><span class="type-name">IO</span><span>.</span><span class="identifier">unit</span><span>)
    } </span><span class="keyword">yield</span><span> ()       
  }

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;multiple SyncIO-assertions should be composed&quot;</span><span>) {
    </span><span class="identifier">assertSyncIO</span><span>(</span><span class="type-name">SyncIO</span><span>(</span><span class="number-literal">42</span><span>), </span><span class="number-literal">42</span><span>) *&gt;
      </span><span class="identifier">assertSyncIO_</span><span>(</span><span class="type-name">SyncIO</span><span>.</span><span class="identifier">unit</span><span>)
  }
    
  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;multiple SyncIO-assertions should be composed via for-comprehension&quot;</span><span>) {
    </span><span class="keyword">for</span><span> {
      </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">assertSyncIO</span><span>(</span><span class="type-name">SyncIO</span><span>(</span><span class="number-literal">42</span><span>), </span><span class="number-literal">42</span><span>)
      </span><span class="identifier">_</span><span> &lt;- </span><span class="identifier">assertSyncIO_</span><span>(</span><span class="type-name">SyncIO</span><span>.</span><span class="identifier">unit</span><span>)
    } </span><span class="keyword">yield</span><span> ()       
  }
}</span></code></pre>
        
        <h2 id="suite-local-fixtures" class="section"><a class="anchor-link left" href="#suite-local-fixtures"><i class="icofont-laika link">&#xef71;</i></a>Suite-local fixtures</h2>
        <p>MUnit supports reusable suite-local fixtures that are instantiated only once for the entire test suite. This is useful when an expensive resource (like an HTTP client) is needed for each test case but it is undesirable to allocate a new one each time.</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">effect</span><span>.{</span><span class="type-name">IO</span><span>, </span><span class="type-name">Resource</span><span>}

</span><span class="keyword">class</span><span> </span><span class="type-name">SuiteLocalExampleSuite</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">CatsEffectSuite</span><span> {

  </span><span class="keyword">val</span><span> </span><span class="identifier">myFixture</span><span> = </span><span class="type-name">ResourceSuiteLocalFixture</span><span>(
    </span><span class="string-literal">&quot;my-fixture&quot;</span><span>,
    </span><span class="type-name">Resource</span><span>.</span><span class="identifier">make</span><span>(</span><span class="type-name">IO</span><span>.</span><span class="identifier">unit</span><span>)(</span><span class="identifier">_</span><span> =&gt; </span><span class="type-name">IO</span><span>.</span><span class="identifier">unit</span><span>)
  )

  </span><span class="keyword">override</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">munitFixtures</span><span> = </span><span class="type-name">List</span><span>(</span><span class="identifier">myFixture</span><span>)

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;first test&quot;</span><span>) {
    </span><span class="type-name">IO</span><span>(</span><span class="identifier">myFixture</span><span>()).</span><span class="identifier">assertEquals</span><span>(())
  }

  </span><span class="identifier">test</span><span>(</span><span class="string-literal">&quot;second test&quot;</span><span>) {
    </span><span class="type-name">IO</span><span>(</span><span class="identifier">myFixture</span><span>()).</span><span class="identifier">assertEquals</span><span>(())
  }

}</span></code></pre>
        <p>Notice that this integration is not pure; <code>myFixture</code> is mutated internally when the framework initializes the fixture, so the same reference that is used from test cases must be specified in <code>munitFixtures</code>. Otherwise an exception <code>FixtureNotInstantiatedException</code> will be thrown.</p>

        
<hr class="footer-rule"/>
<footer>
  munit-cats-effect is a <a href="https://typelevel.org/">Typelevel</a> project distributed under the <a href="https://www.apache.org/licenses/LICENSE-2.0.txt">Apache-2.0</a> license.
</footer>


      </main>

    </div>

  </body>

</html>